{{ define "main" }}

<div class="books-page">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    {{- if .Description }}
    <p class="page-subtitle">{{ .Description }}</p>
    {{- end }}
  </header>

  <div class="books-grid">
    {{ range .Pages.ByWeight }}
      <article class="book-card">
        {{ $cover := "" }}

        {{ if .Resources }}
            {{ $coverResource := .Resources.GetMatch (.Params.cover.image) }}
            {{ if $coverResource }}
                {{ $cover = $coverResource.RelPermalink }}
            {{ end }}
        {{ end }}

        {{ if not $cover }}
            {{ $cover = .Params.cover.image | safeURL }}
        {{ end }}

        <a href="{{ .RelPermalink }}" class="book-card-link">
          <div class="book-cover">
            <img src="{{ $cover }}" alt="{{ .Params.cover.alt | default .Title }}" loading="lazy">
          </div>
          <div class="book-content">
            <h3 class="book-title">{{ .Title }}</h3>
            <p class="book-description">{{ .Params.description }}</p>
            <span class="book-details-link">View Details â†’</span>
          </div>
        </a>
      </article>
    {{ end }}
  </div>
</div>

{{ end }}
